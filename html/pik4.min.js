var lang=navigator.language;var _ua=function(u){return{Tablet:u.indexOf("windows")!=-1&&u.indexOf("touch")!=-1&&u.indexOf("tablet pc")==-1||u.indexOf("ipad")!=-1||u.indexOf("android")!=-1&&u.indexOf("mobile")==-1||u.indexOf("firefox")!=-1&&u.indexOf("tablet")!=-1||u.indexOf("kindle")!=-1||u.indexOf("silk")!=-1||u.indexOf("playbook")!=-1,Mobile:u.indexOf("windows")!=-1&&u.indexOf("phone")!=-1||u.indexOf("iphone")!=-1||u.indexOf("ipod")!=-1||u.indexOf("android")!=-1&&u.indexOf("mobile")!=-1||u.indexOf("firefox")!=-1&&u.indexOf("mobile")!=-1||u.indexOf("blackberry")!=-1}}(window.navigator.userAgent.toLowerCase());function SetSubMenu3(idname3){if(idname3=="limited_post"){document.getElementById("limited_post").style.display="block";document.getElementById("other_post").style.display="none";document.getElementById("conf_text").style.display="block"}else if(idname3=="other_post"){document.getElementById("limited_post").style.display="none";document.getElementById("other_post").style.display="block";document.getElementById("conf_text").style.display="block"}else{document.getElementById("limited_post").style.display="none";document.getElementById("other_post").style.display="none";document.getElementById("conf_text").style.display="none"}}function SetSubMenu4(idname4){if(idname4==0){document.getElementById("battle_setting").style.display="block";document.getElementById("battle_setting2").style.display="none"}else if(idname4==1||idname4==2){document.getElementById("battle_setting").style.display="none";document.getElementById("battle_setting2").style.display="block"}else{document.getElementById("battle_setting").style.display="none";document.getElementById("battle_setting2").style.display="none"}}function SetSubMenu2(idname2){if(idname2==10100||idname2==10200||idname2==10300){document.getElementById("story_limited").style.display="block"}else{document.getElementById("story_limited").style.display="none"}if(idname2>=10200&&idname2<=10299){document.getElementById("story_2only").style.display="block";document.getElementById("story_correct").style.display="none";document.getElementById("story_3only").style.display="none";document.getElementById("notice1").style.display="none";document.getElementById("notice2").style.display="block";document.getElementById("notice3").style.display="none"}else if(idname2>=10300&&idname2<=10399){document.getElementById("story_correct").style.display="block";document.getElementById("story_correct").style.float="left";document.getElementById("story_2only").style.display="none";document.getElementById("story_3only").style.display="block";document.getElementById("notice1").style.display="none";document.getElementById("notice2").style.display="none";document.getElementById("notice3").style.display="block"}else{document.getElementById("story_correct").style.display="block";document.getElementById("story_correct").style.float="left";document.getElementById("story_2only").style.display="none";document.getElementById("story_3only").style.display="none";document.getElementById("notice1").style.display="block";document.getElementById("notice2").style.display="none";document.getElementById("notice3").style.display="none"}}function AllHide(){document.getElementById("normal_score").style.display="none";document.getElementById("boss_score").style.display="none";document.getElementById("normal_stage").style.display="none";document.getElementById("limited_stage").style.display="none";document.getElementById("new_stage").style.display="none";document.getElementById("unlimited").style.display="none";document.getElementById("story_mode").style.display="none";document.getElementById("story_result").style.display="none";document.getElementById("specials").style.display="none";document.getElementById("story_caves").style.display="none";document.getElementById("non-specials").style.display="none";document.getElementById("non-conf").style.display="none";document.getElementById("conf").style.display="none";document.getElementById("storycave").style.display="none";document.getElementById("conf_value_box").style.display="none";document.getElementById("conf_text_box").style.display="none";document.getElementById("conf_update_box").style.display="none";document.getElementById("multi_stage").style.display="none";document.getElementById("multi_player").style.display="none";document.getElementById("battle_mode").style.display="none";document.getElementById("conf_prof_box").style.display="none";var element=document.getElementsByClassName("c0");for(var i=0;i<element.length;i++){element[i].style.display="none"}}var navlock_toggle=0;$(function(){$(".navmenu").hover(function(){navlock_toggle=getCookie("navlock");if(navlock_toggle==0){$(".topscore").each(function(){$(this).hide()});$(".liminfo").each(function(){$(this).hide()});var idn=$(this).attr("id");idn=idn.replace("nv","top-score");$("."+idn).show()}})});$(function(){$(".navmenulim").hover(function(){navlock_toggle=getCookie("navlock");if(navlock_toggle==0){$(".liminfo").each(function(){$(this).hide()});$(".subscore").each(function(){$(this).hide()});var idn=$(this).attr("id");idn=idn.replace("nv","lim");$("."+idn).show()}})});$(function(){$(".subnavmenulim").hover(function(){navlock_toggle=getCookie("navlock");if(navlock_toggle==0){$(".liminfo").each(function(){$(this).hide()});var idn=$(this).attr("id");idn=idn.replace("nv","lim");$("."+idn).show();idn=idn.replace("lim","top-score");$("."+idn).show()}})});function SetSubMenu(idname){AllHide();if(idname!=""&&idname>=101&&idname<=230){document.getElementById("normal_score").style.display="block";document.getElementById("normal_stage").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname!=""&&idname>=231&&idname<=244){document.getElementById("storycave").style.display="block";document.getElementById("story_caves").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname!=""&&idname>=275&&idname<=284){document.getElementById("non-conf").style.display="block";document.getElementById("battle_mode").style.display="block";document.getElementById("multi_player").style.display="block"}else if(idname!=""&&idname>=285&&idname<=297){document.getElementById("normal_score").style.display="block";document.getElementById("new_stage").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname!=""&&idname>=245&&idname<=310){document.getElementById("normal_score").style.display="block";document.getElementById("normal_stage").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname!=""&&idname>=311&&idname<=316){document.getElementById("boss_score").style.display="block";document.getElementById("normal_stage").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname!=""&&idname>=317&&idname<=336){document.getElementById("normal_score").style.display="block";document.getElementById("normal_stage").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname!=""&&idname>=337&&idname<=348){document.getElementById("non-conf").style.display="block";document.getElementById("battle_mode").style.display="block";document.getElementById("multi_player").style.display="block"}else if(idname!=""&&(idname==356||idname==359||idname==361)){document.getElementById("boss_score").style.display="block";document.getElementById("normal_stage").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname!=""&&idname>=349&&idname<=362){document.getElementById("normal_score").style.display="block";document.getElementById("normal_stage").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname!=""&&idname>=1e3&&idname<=1999){document.getElementById("normal_score").style.display="block";document.getElementById("limited_stage").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname!=""&&idname>=2e3&&idname<=2310){document.getElementById("normal_score").style.display="block";document.getElementById("multi_stage").style.display="block";document.getElementById("multi_player").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname!=""&&idname>=2311&&idname<=2316){document.getElementById("boss_score").style.display="block";document.getElementById("multi_stage").style.display="block";document.getElementById("multi_player").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname!=""&&idname>=2317&&idname<=2336){document.getElementById("normal_score").style.display="block";document.getElementById("multi_stage").style.display="block";document.getElementById("multi_player").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname!=""&&(idname==2356||idname==2359||idname==2361)){document.getElementById("boss_score").style.display="block";document.getElementById("multi_stage").style.display="block";document.getElementById("multi_player").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname!=""&&idname>=2349&&idname<=2362){document.getElementById("normal_score").style.display="block";document.getElementById("multi_stage").style.display="block";document.getElementById("multi_player").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname!=""&&idname>=5017&&idname<=5077){document.getElementById("normal_score").style.display="block";document.getElementById("unlimited").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname!=""&&idname>=10205&&idname<=10206){document.getElementById("story_mode").style.display="block";document.getElementById("story_result").style.display="block";document.getElementById("non-conf").style.display="block";var element=document.getElementsByClassName("c0");for(var i=0;i<element.length;i++){element[i].style.display="block"}}else if(idname!=""&&idname>=10207&&idname<=10212){var ts=idname-10206;var sid="c"+ts;document.getElementById("story_mode").style.display="block";document.getElementById("story_result").style.display="block";document.getElementById("non-conf").style.display="block";var element=document.getElementsByClassName(sid);for(var i=0;i<element.length;i++){element[i].style.display="block"}}else if(idname!=""&&idname>=1e4&&idname<=99999){document.getElementById("story_mode").style.display="block";document.getElementById("story_result").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname=="limited"){document.getElementById("normal_score").style.display="block";document.getElementById("limited_stage").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname=="new"){document.getElementById("normal_score").style.display="block";document.getElementById("new_stage").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname=="unlimited"){document.getElementById("normal_score").style.display="block";document.getElementById("unlimited").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname=="story"){document.getElementById("story_mode").style.display="block";document.getElementById("story_result").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname=="storycave"){document.getElementById("storycave").style.display="block";document.getElementById("story_caves").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname=="configure"){document.getElementById("conf").style.display="block"}else if(idname=="record_delete"){document.getElementById("conf_value_box").style.display="block";document.getElementById("conf").style.display="block"}else if(idname=="profile_post"){document.getElementById("conf_prof_box").style.display="block";document.getElementById("conf").style.display="block"}else if(idname=="nopost_login"){document.getElementById("conf_login_box").style.display="block";document.getElementById("conf").style.display="block"}else if(idname=="record_update"){document.getElementById("conf_value_box").style.display="block";document.getElementById("conf_update_box").style.display="block";document.getElementById("conf").style.display="block"}else if(idname=="limited_post"){document.getElementById("conf_text_box").style.display="block";document.getElementById("conf").style.display="block"}else if(idname=="multi"){document.getElementById("normal_score").style.display="block";document.getElementById("multi_stage").style.display="block";document.getElementById("multi_player").style.display="block";document.getElementById("non-conf").style.display="block"}else if(idname=="battle"){document.getElementById("non-conf").style.display="block";document.getElementById("battle_mode").style.display="block";document.getElementById("multi_player").style.display="block"}else if(idname=="default"){document.getElementById("conf_value_box").style.display="block";document.getElementById("conf").style.display="block"}else{document.getElementById("normal_score").style.display="block";document.getElementById("normal_stage").style.display="block";document.getElementById("non-conf").style.display="block"}if(idname!=""&&idname==299){document.getElementById("specials").style.display="block"}else{document.getElementById("non-specials").style.display="block"}}function notification_out(){document.getElementById("post_notification").style.display="none"}function notification_out2(){document.getElementById("post_notification2").style.display="none"}$(function(){setTimeout(function(){$(".post_notification").slideUp("slow")},99999)});$(function(){$(".rtd_tooltip").tooltip({position:{my:"left top",at:"left bottom+5px",collision:"none"},show:{effect:"drop",direction:"up",delay:"0",duration:"0"},hide:false})});function id_tooltip(unique_id){var id="id-"+unique_id;var popup=document.getElementById(id);popup.innerHTML='<p><i class="fa fa-tag rtd_tooltip"></i>投稿ID：'+unique_id+"</p>"}function totalsum2(){var red=eval(document.form1.storyc_red.value);var blue=eval(document.form1.storyc_blue.value);var yellow=eval(document.form1.storyc_yellow.value);var purple=eval(document.form1.storyc_purple.value);var white=eval(document.form1.storyc_white.value);if(!isFinite(red))red=0;if(!isFinite(blue))blue=0;if(!isFinite(yellow))yellow=0;if(!isFinite(purple))purple=0;if(!isFinite(white))white=0;var total=red+blue+yellow+purple+white;var elem=document.getElementById("total_pikminc");elem.innerHTML=total}function totalsum(){var red=eval(document.form1.story_red.value);var blue=eval(document.form1.story_blue.value);var yellow=eval(document.form1.story_yellow.value);var purple=eval(document.form1.story_purple.value);var white=eval(document.form1.story_white.value);var rock=eval(document.form1.story_rock.value);var winged=eval(document.form1.story_winged.value);if(!isFinite(red))red=0;if(!isFinite(blue))blue=0;if(!isFinite(yellow))yellow=0;if(!isFinite(purple))purple=0;if(!isFinite(white))white=0;if(!isFinite(rock))rock=0;if(!isFinite(winged))winged=0;var total=red+blue+yellow+purple+white+rock+winged;var elem=document.getElementById("total_pikmin");elem.innerHTML=total}function simscore(){var stage=eval(document.form1.cave_stage_id.value);var red=eval(document.form1.storyc_red.value);var blue=eval(document.form1.storyc_blue.value);var yellow=eval(document.form1.storyc_yellow.value);var purple=eval(document.form1.storyc_purple.value);var white=eval(document.form1.storyc_white.value);var koppa=eval(document.form1.storyc_koppa.value);var popoga=eval(document.form1.storyc_popoga.value);var death=eval(document.form1.storyc_death.value);if(!isFinite(red))red=0;if(!isFinite(blue))blue=0;if(!isFinite(yellow))yellow=0;if(!isFinite(purple))purple=0;if(!isFinite(white))white=0;if(!isFinite(koppa))koppa=0;if(!isFinite(popoga))popoga=0;if(!isFinite(death))death=0;var total=red+blue+yellow+purple+white+koppa+popoga*8-death;var poko=eval(document.form1.story_cavepoko.value);var hour=eval(document.form1.story_cavehour.value);var min=eval(document.form1.story_cavemin.value);var sec=eval(document.form1.story_cavesec.value);if(!isFinite(hour))hour=0;if(!isFinite(min))min=0;if(!isFinite(sec))sec=0;var nowtime=sec+min*60+hour*60*60;var alltime=0;$.ajax({type:"POST",url:"pik4_cavesdata.php",data:{db:"stage_title",stage_id:stage,type:"Time"},success:function(data){var lasttime=Math.floor((data-nowtime)/2);var simscore=poko*10+total*10+lasttime;var elem=document.getElementById("sim_score");elem.innerHTML=simscore},error:function(XMLHttpRequest,textStatus,errorThrown){elem.innerHTML="errorThrown : "+errorThrown.message}})}function echostage(database,stageid,columntitle,divid){db=database;stage=stageid;type=columntitle;$.ajax({type:"POST",url:"pik4_cavesdata.php",data:{db:db,stage_id:stage,type:type},success:function(data){if(columntitle=="Time"){var htale="";var mtale="";var timestring="";var hur=data/3600|0;var min=data%3600/60|0;var sec=data%60;if(data>3600)var htale=zeroPadding(hur,2)+"時間 ";if(data>60)var mtale=zeroPadding(min,2)+"分 ";timestring=htale+mtale+zeroPadding(sec,2)+"秒";var elem=document.getElementById(divid);elem.innerHTML=timestring}else{var elem=document.getElementById(divid);elem.innerHTML=data}},error:function(XMLHttpRequest,textStatus,errorThrown){var elem=document.getElementById(divid);elem.innerHTML=errorThrown.message}})}var zeroPadding=function(number,digit){var numberLength=String(number).length;if(digit>numberLength){return new Array(digit-numberLength+1).join(0)+number}else{return number}};function egg_fortune_ope(){var msg=new Array;var EggCount=8;var minites_total=0;var elem=document.getElementById("egg_fortune");elem.innerHTML="タマゴを割っています...";setTimeout(function(){elem.innerHTML="";elem.innerHTML+='<A href="javascript:void(0)" id="egg_fortune_start" onclick="egg_fortune_ope()">タマゴを割る</A><br/>';var ninthegg=Math.floor(Math.random()*(8+1-1)+1);if(ninthegg==8){EggCount=EggCount+1}for(var i=1;i<=EggCount;i++){msg[i]="";var EggFortune=Math.floor(Math.random()*(20+1-1)+1);if(EggFortune>0&&EggFortune<11)msg[i]="大地のエキスが出現！<br/>";if(EggFortune>10&&EggFortune<18)msg[i]="大地のエキスが2つ出現！<br/>";if(EggFortune==18)msg[i]="ゲキカラエキスが出現！<br/>";if(EggFortune==19)msg[i]="ゲキニガエキスが出現！<br/>";if(EggFortune==20){var minites_count=0;var eggs_success=Math.floor(Math.random()*(1e3+1-1)+1);if(eggs_success>=1&&eggs_success<=10)minites_count=1;if(eggs_success>=11&&eggs_success<=34)minites_count=2;if(eggs_success>=35&&eggs_success<=84)minites_count=3;if(eggs_success>=85&&eggs_success<=234)minites_count=4;if(eggs_success>=235&&eggs_success<=784)minites_count=5;if(eggs_success>=785&&eggs_success<=934)minites_count=6;if(eggs_success>=935&&eggs_success<=984)minites_count=7;if(eggs_success>=985&&eggs_success<=994)minites_count=8;if(eggs_success>=995&&eggs_success<=999)minites_count=9;if(eggs_success==1e3)minites_count=10;msg[i]="<b>タマゴムシが出現！ ("+minites_count+"匹倒した)</b><br/>";minites_total+=minites_count}}var formatDate=function(date,format){if(!format)format="YYYY-MM-DD hh:mm:ss.SSS";format=format.replace(/YYYY/g,date.getFullYear());format=format.replace(/MM/g,("0"+(date.getMonth()+1)).slice(-2));format=format.replace(/DD/g,("0"+date.getDate()).slice(-2));format=format.replace(/hh/g,("0"+date.getHours()).slice(-2));format=format.replace(/mm/g,("0"+date.getMinutes()).slice(-2));format=format.replace(/ss/g,("0"+date.getSeconds()).slice(-2));if(format.match(/S/g)){var milliSeconds=("00"+date.getMilliseconds()).slice(-3);var length=format.match(/S/g).length;for(var i=0;i<length;i++)format=format.replace(/S/,milliSeconds.substring(i,i+1))}return format};var nowdate=formatDate(new Date);$.ajax({type:"POST",url:"pik4_minites.php",data:{minites_count:minites_total,date:nowdate,egg:EggCount},success:function(data){if(data!="タマゴムシポイントが足りません！"){for(i=1;i<=EggCount;i++){elem.innerHTML+=msg[i]}elem.innerHTML+="<b>合計："+minites_total+"匹</b><br/>";elem.innerHTML+=data;elem.innerHTML+="（"+nowdate+"）"}else{elem.innerHTML+=data}},error:function(XMLHttpRequest,textStatus,errorThrown){}})},1e3)}function formlock(){var lock_toggle=getCookie("formlock");var icon_toggle=document.getElementById("formlock_div");if(lock_toggle==0){lock_toggle=1;icon_toggle.innerHTML='<a href="#" class="marklink" style="color:#ffffff;" onclick="formlock();"><i class="fa fa-lock"></i>フォームロック中</a>'}else{lock_toggle=0;icon_toggle.innerHTML='<a href="#" class="marklink" style="color:#ffffff;" onclick="formlock();"><i class="fa fa-unlock"></i>フォームロック解除中</a>'}document.cookie="formlock="+lock_toggle+";max-age=2592000"}function navlock(){var lock_toggle=getCookie("navlock");var icon_toggle=document.getElementById("navlock_div");if(lock_toggle==0){lock_toggle=1;icon_toggle.innerHTML='<a href="#" class="marklink" style="color:#ffffff;" onclick="navlock();"><i class="fa fa-lock"></i>ナビゲーションロック中</a>'}else{lock_toggle=0;icon_toggle.innerHTML='<a href="#" class="marklink" style="color:#ffffff;" onclick="navlock();"><i class="fa fa-unlock"></i>ナビゲーションロック解除中</a>'}document.cookie="navlock="+lock_toggle+";max-age=2592000"}function watchmode(){var lock_toggle=getCookie("watchmode");var icon_toggle=document.getElementById("watchmode_div");if(lock_toggle==0){lock_toggle=1;icon_toggle.innerHTML='<a href="#" class="marklink" style="color:#ffffff;" onclick="watchmode();"><i class="fa fa-lock"></i>観戦モードON</a>'}else{lock_toggle=0;icon_toggle.innerHTML='<a href="#" class="marklink" style="color:#ffffff;" onclick="watchmode();"><i class="fa fa-unlock"></i>観戦モードOFF</a>'}document.cookie="watchmode="+lock_toggle+";max-age=2592000"}function getCookie(c_name){var st="";var ed="";if(document.cookie.length>0){st=document.cookie.indexOf(c_name+"=");if(st!=-1){st=st+c_name.length+1;ed=document.cookie.indexOf(";",st);if(ed==-1)ed=document.cookie.length;return unescape(document.cookie.substring(st,ed))}}return""}$(function(){var menu=$("#org_form"),menuBtn=$(".form_toggle"),mainBtn=$("#main_toggle"),body=$(document.body),menuWidth=menu.outerWidth(),lock_toggle=getCookie("formlock");if(body.hasClass("pre-open")){body.animate({marginLeft:menuWidth},0,"easeInQuint");menu.animate({left:0},0,"easeInQuint");body.toggleClass("open")}if(body.hasClass("pre-open")&&body.hasClass("pre-open2")){body.animate({marginLeft:menuWidth},0,"easeInQuint");menu.animate({left:0},0,"easeInQuint");body.toggleClass("open2")}$('select[name="ranking_type"]').change(function(){var ranktype=$('select[name="ranking_type"] option:selected').attr("value");var wid=$(window).width();var spw=640;if(spw<=wid){if(ranktype=="story"||ranktype=="storycave"||ranktype=="configure"){body.animate({marginLeft:"600px"},300,"easeInQuint");menu.animate({left:0,width:"600px"},300,"easeInQuint");body.addClass("open2");body.addClass("pre-open2")}else{menu.animate({width:"300px"},300,"easeOutQuint");body.animate({marginLeft:"300px"},300,"easeOutQuint");body.addClass("open");body.removeClass("open2");body.removeClass("pre-open2")}}});menuBtn.on("click",function(){body.toggleClass("open");if(body.hasClass("pre-open2")&&body.hasClass("open")||body.hasClass("pre-open3")){body.animate({marginLeft:"600px"},300,"easeInQuint");menu.animate({left:0,width:"600px"},300,"easeInQuint");body.toggleClass("open2")}else if(body.hasClass("open")&&!body.hasClass("open2")){body.animate({marginLeft:"300px"},300,"easeInQuint");menu.animate({left:0,width:"300px"},300,"easeInQuint")}else if(body.hasClass("open2")||body.hasClass("pre-open2")){menu.animate({left:"-600px",width:"600px"},300,"easeOutQuint");body.animate({marginLeft:"0px"},300,"easeOutQuint");body.toggleClass("open2");body.addClass("pre-open2")}else{menu.animate({left:"-300px",width:"300px"},300,"easeOutQuint");body.animate({marginLeft:0},300,"easeOutQuint")}})});var spformtoggle=function(){var wid2=$(window).width();var spw2=640;if(wid2<=spw2){document.body.style.marginLeft="0px"}else if($(document.body).hasClass("open2")){document.body.style.marginLeft="600px"}else if($(document.body).hasClass("open")){document.body.style.marginLeft="300px"}else{document.body.style.marginLeft="0px"}};$(function(){spformtoggle();$(window).resize(spformtoggle)});$(function(){$("select[name=pulldown1]").change(function(){if($(this).val()!=""){window.location.href=$(this).val()}});$("#location").click(function(){if($(this).val()!=""){window.location.href=$("select[name=pulldown2]").val()}})});function FormSubmit(){var myform=document.forms.form2;var compare_utf8=document.forms.form2.compare_data.value;var compare_value=encodeURIComponent(compare_utf8);document.cookie="compare_data="+compare_value+";";myform.method="POST";myform.action="#";location.reload();return}function FormSubmit2(){var myform=document.forms.form3;var compare_utf8=document.forms.form3.sort_data.value;var compare_value=encodeURIComponent(compare_utf8);document.cookie="sort_data="+compare_value+";";myform.method="POST";myform.action="#";location.reload();return}function FormSubmit3(){var myform=document.forms.form4;var compare_utf8=document.forms.form4.filtering_data.value;var compare_value=encodeURIComponent(compare_utf8);document.cookie="filtering_data="+compare_value+";";myform.method="POST";myform.action="#";location.reload();return}function FormSubmit4(){var myform=document.forms.form5;var compare_utf8=document.forms.form5.filtering_sub_data.value;var compare_value=encodeURIComponent(compare_utf8);document.cookie="filtering_sub_data="+compare_value+";";myform.method="POST";myform.action="#";location.reload();return}function FormSubmit5(){var myform=document.forms.form6;var compare_utf8=document.forms.form6.pin_data.value;var compare_value=encodeURIComponent(compare_utf8);document.cookie="pin_data="+compare_value+";";myform.method="POST";myform.action="#";location.reload();return}function FormSubmit6(){var myform=document.forms.form7;var compare_utf8=document.forms.form7.season_data.value;var compare_value=encodeURIComponent(compare_utf8);document.cookie="season_data="+compare_value+";";myform.method="POST";myform.action="#";location.reload();return}function FormSubmit8(){var myform=document.forms.form8;var compare_utf8=document.forms.form8.filtering_log_data.value;var compare_value=encodeURIComponent(compare_utf8);document.cookie="log_data="+compare_value+";";myform.method="POST";myform.action="#";location.reload();return}function ScoreHistory(stageid,username){var date1,date2;date1=new Date;date1.setTime(date1.getTime()+1*1e3);date2=date1.toGMTString();document.cookie="history_id="+stageid+";expires="+date2;document.cookie="user_id="+username+";expires="+date2;location.reload();return}$(document).ready(function(){hsize=$(window).height();wsize=$(window).width();hsize=hsize/2-180;if(wsize>640){$("#top_page_div").css("margin-top",hsize+"px")}else{$("#top_page_div").css("margin-top","40px");$("#top_page_div").css("margin-bottom","40px")}});$(window).resize(function(){hsize=$(window).height();wsize=$(window).width();hsize=hsize/2-180;if(wsize>640){$("#top_page_div").css("margin-top",hsize+"px")}else{$("#top_page_div").css("margin-top","40px");$("#top_page_div").css("margin-bottom","40px")}});$(document).ready(function(){hsize=$(window).height();wsize=$(window).width();if(wsize<640){hasfix=wsize/16*9;$("#video").css("width",wsize+"px");$("#video").css("height",hasfix+"px")}else{hasfix=wsize/16*9;wasfix=hsize/9*16;if(hsize<hasfix)hsize=hasfix;if(wsize<wasfix)wsize=wasfix;$("#video").css("height",hsize+"px");$("#video").css("width",wsize+"px")}});$(window).resize(function(){hsize=$(window).height();wsize=$(window).width();if(wsize<640){hasfix=wsize/16*9;$("#video").css("width",wsize+"px");$("#video").css("height",hasfix+"px")}else{hasfix=wsize/16*9;wasfix=hsize/9*16;if(hsize<hasfix)hsize=hasfix;if(wsize<wasfix)wsize=wasfix;$("#video").css("height",hsize+"px");$("#video").css("width",wsize+"px")}});function sumtotal(){var sum_price=0;$(".object:checkbox").each(function(){if($(this).prop("checked")){var point=$(this).val();sum_price=parseInt(point)+sum_price}});document.myform.total_price.value=sum_price+" poko";get_diffprice()}$(document).ready(function(){$(".object:checkbox").click(function(){var sum_price=0;$(".object:checkbox").each(function(){if($(this).prop("checked")){var point=$(this).val();sum_price=parseInt(point)+sum_price}});document.myform.total_price.value=sum_price+" poko";get_diffprice()})});function get_diffprice(){var elem=document.getElementById("diff_price");var a=parseInt(document.forms.myform.total_price.value);var b=parseInt(document.forms.myform.max_price.value);var c=a-b;if(!isNaN(c)){if(c==0){elem.innerHTML="<b>OK!</b>"}else{elem.innerHTML=c}}else{elem.innerHTML=b}}$(function(){$("#category_all").on("click",function(){$(".object").prop("checked",this.checked);sumtotal()});$(".object").on("click",function(){if($("#categories :checked").length==$("#categories :input").length){$("#category_all").prop("checked","checked")}else{$("#category_all").prop("checked",false)}})});function VideoToggle(){var toggle=getCookie("video_toggle");if(toggle!=1){toggle=1;document.cookie="video_toggle="+toggle+";"}else{toggle=0;document.cookie="video_toggle="+toggle+";"}location.reload()}function navToggle(){$("#top_page_div").toggle()}function shuffle(array){var n=array.length,t,i;while(n){i=Math.floor(Math.random()*n--);t=array[n];array[n]=array[i];array[i]=t}return array}$(function(){var video=document.getElementById("video");var info=document.getElementById("video_info");if(video!=null&&info!=null){var videolist=new Array("https://chr.mn/_mov/pik4/movie101.mp4","https://chr.mn/_mov/pik4/movie103.mp4","https://chr.mn/_mov/pik4/movie201.mp4","https://chr.mn/_mov/pik4/movie202.mp4","https://chr.mn/_mov/pik4/movie203.mp4","https://chr.mn/_mov/pik4/movie204.mp4","https://chr.mn/_mov/pik4/movie206.mp4","https://chr.mn/_mov/pik4/movie207.mp4","https://chr.mn/_mov/pik4/movie208.mp4","https://chr.mn/_mov/pik4/movie209.mp4","https://chr.mn/_mov/pik4/movie210.mp4","https://chr.mn/_mov/pik4/movie211.mp4","https://chr.mn/_mov/pik4/movie212.mp4","https://chr.mn/_mov/pik4/movie213.mp4","https://chr.mn/_mov/pik4/movie214.mp4","https://chr.mn/_mov/pik4/movie215.mp4","https://chr.mn/_mov/pik4/movie216.mp4","https://chr.mn/_mov/pik4/movie217.mp4","https://chr.mn/_mov/pik4/movie218.mp4","https://chr.mn/_mov/pik4/movie219.mp4","https://chr.mn/_mov/pik4/movie220.mp4","https://chr.mn/_mov/pik4/movie221.mp4","https://chr.mn/_mov/pik4/movie222.mp4","https://chr.mn/_mov/pik4/movie223.mp4","https://chr.mn/_mov/pik4/movie224.mp4","https://chr.mn/_mov/pik4/movie225.mp4","https://chr.mn/_mov/pik4/movie226.mp4","https://chr.mn/_mov/pik4/movie227.mp4","https://chr.mn/_mov/pik4/movie228.mp4","https://chr.mn/_mov/pik4/movie229.mp4","https://chr.mn/_mov/pik4/movie230.mp4","https://chr.mn/_mov/pik4/movie301.mp4","https://chr.mn/_mov/pik4/movie302.mp4","https://chr.mn/_mov/pik4/movie303.mp4","https://chr.mn/_mov/pik4/movie304.mp4","https://chr.mn/_mov/pik4/movie305.mp4","https://chr.mn/_mov/pik4/movie306.mp4","https://chr.mn/_mov/pik4/movie307.mp4","https://chr.mn/_mov/pik4/movie308.mp4","https://chr.mn/_mov/pik4/movie309.mp4","https://chr.mn/_mov/pik4/movie310.mp4","https://chr.mn/_mov/pik4/movie311.mp4","https://chr.mn/_mov/pik4/movie312.mp4","https://chr.mn/_mov/pik4/movie313.mp4","https://chr.mn/_mov/pik4/movie314.mp4","https://chr.mn/_mov/pik4/movie315.mp4","https://chr.mn/_mov/pik4/movie316.mp4","https://chr.mn/_mov/pik4/movie317.mp4","https://chr.mn/_mov/pik4/movie318.mp4","https://chr.mn/_mov/pik4/movie319.mp4","https://chr.mn/_mov/pik4/movie320.mp4","https://chr.mn/_mov/pik4/movie321.mp4","https://chr.mn/_mov/pik4/movie322.mp4","https://chr.mn/_mov/pik4/movie323.mp4","https://chr.mn/_mov/pik4/movie324.mp4","https://chr.mn/_mov/pik4/movie325.mp4","https://chr.mn/_mov/pik4/movie326.mp4","https://chr.mn/_mov/pik4/movie327.mp4","https://chr.mn/_mov/pik4/movie328.mp4","https://chr.mn/_mov/pik4/movie329.mp4","https://chr.mn/_mov/pik4/movie330.mp4","https://chr.mn/_mov/pik4/movie331.mp4","https://chr.mn/_mov/pik4/movie332.mp4","https://chr.mn/_mov/pik4/movie333.mp4","https://chr.mn/_mov/pik4/movie334.mp4","https://chr.mn/_mov/pik4/movie335.mp4","https://chr.mn/_mov/pik4/movie336.mp4");var videotitle=new Array('ピクミン チャレンジモード</span><br/><span class="video_title">遭難地点</span>','ピクミン チャレンジモード</span><br/><span class="video_title">樹海のヘソ</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">こてしらべの洞窟</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">新参者の試練場</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">神々のおもちゃ箱</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">あのひとの庭</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">地下の温室</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">鉄人の穴</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">赤の洞窟</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">花園を荒らすもの</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">たそがれの庭</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">かくしもちの洞窟</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">コンクリート迷路</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">コレクタールーム</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">ショイグモの巣</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">大足の穴</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">食神のかまど</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">三色試練場</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">炎と水の試練場</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">鼻息の洞穴</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">巨人のトイレ</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">土とんの洞窟</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">地底警備室</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">ひみつの花園</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">さらいの洞窟</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">秘密兵器実験場</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">倍々ゲームの穴</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">天罰の穴</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">どっすん迷路</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">スナイパールーム</span>','ピクミン2 チャレンジモード</span><br/><span class="video_title">デメマダラの巣窟</span>','ピクミン3 ミッションモード お宝をあつめろ！</span><br/><span class="video_title">原生の杜</span>','ピクミン3 ミッションモード お宝をあつめろ！</span><br/><span class="video_title">白銀の泉</span>','ピクミン3 ミッションモード お宝をあつめろ！</span><br/><span class="video_title">渇きの砂</span>','ピクミン3 ミッションモード お宝をあつめろ！</span><br/><span class="video_title">落葉の回廊</span>','ピクミン3 ミッションモード お宝をあつめろ！</span><br/><span class="video_title">草花の園</span>','ピクミン3 ミッションモード 原生生物をたおせ！</span><br/><span class="video_title">原生の杜</span>','ピクミン3 ミッションモード 原生生物をたおせ！</span><br/><span class="video_title">白銀の泉</span>','ピクミン3 ミッションモード 原生生物をたおせ！</span><br/><span class="video_title">渇きの砂</span>','ピクミン3 ミッションモード 原生生物をたおせ！</span><br/><span class="video_title">落葉の回廊</span>','ピクミン3 ミッションモード 原生生物をたおせ！</span><br/><span class="video_title">草花の園</span>','ピクミン3 ミッションモード 巨大生物をたおせ！</span><br/><span class="video_title">ヨロヒイモムカデ</span>','ピクミン3 ミッションモード 巨大生物をたおせ！</span><br/><span class="video_title">オオバケカガミ</span>','ピクミン3 ミッションモード 巨大生物をたおせ！</span><br/><span class="video_title">オオスナフラシ</span>','ピクミン3 ミッションモード 巨大生物をたおせ！</span><br/><span class="video_title">タテゴトハチスズメ</span>','ピクミン3 ミッションモード 巨大生物をたおせ！</span><br/><span class="video_title">ヌマアラシ</span>','ピクミン3 ミッションモード 巨大生物をたおせ！</span><br/><span class="video_title">アメニュウドウ</span>','ピクミン3 ミッションモード お宝をあつめろ！</span><br/><span class="video_title">続・原生の杜</span>','ピクミン3 ミッションモード お宝をあつめろ！</span><br/><span class="video_title">続・白銀の泉</span>','ピクミン3 ミッションモード お宝をあつめろ！</span><br/><span class="video_title">続・渇きの砂</span>','ピクミン3 ミッションモード お宝をあつめろ！</span><br/><span class="video_title">続・落葉の回廊</span>','ピクミン3 ミッションモード お宝をあつめろ！</span><br/><span class="video_title">続・草花の園</span>','ピクミン3 ミッションモード 原生生物をたおせ！</span><br/><span class="video_title">続・始まりの森</span>','ピクミン3 ミッションモード 原生生物をたおせ！</span><br/><span class="video_title">続・再開の花園</span>','ピクミン3 ミッションモード 原生生物をたおせ！</span><br/><span class="video_title">続・迷いの雪原</span>','ピクミン3 ミッションモード 原生生物をたおせ！</span><br/><span class="video_title">続・交わりの渓流</span>','ピクミン3 ミッションモード 原生生物をたおせ！</span><br/><span class="video_title">続・哀しき獣の塔</span>','ピクミン3 ミッションモード お宝をあつめろ！</span><br/><span class="video_title">冬の贈りもの</span>','ピクミン3 ミッションモード お宝をあつめろ！</span><br/><span class="video_title">工事現場ドリーム</span>','ピクミン3 ミッションモード お宝をあつめろ！</span><br/><span class="video_title">ピクアリウム</span>','ピクミン3 ミッションモード お宝をあつめろ！</span><br/><span class="video_title">思いでの砂浜</span>','ピクミン3 ミッションモード お宝をあつめろ！</span><br/><span class="video_title">機械仕掛けのブルース</span>','ピクミン3 ミッションモード 原生生物をたおせ！</span><br/><span class="video_title">冬の贈りもの</span>','ピクミン3 ミッションモード 原生生物をたおせ！</span><br/><span class="video_title">工事現場ドリーム</span>','ピクミン3 ミッションモード 原生生物をたおせ！</span><br/><span class="video_title">ピクアリウム</span>','ピクミン3 ミッションモード 原生生物をたおせ！</span><br/><span class="video_title">思いでの砂浜</span>','ピクミン3 ミッションモード 原生生物をたおせ！</span><br/><span class="video_title">機械仕掛けのブルース</span>');var videoposition=new Array(0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66);shuffle(videoposition);var videonum=0;var vcount=videolist.length;info.innerHTML='<span class="video_subtitle">1 / '+vcount+"<br/>"+videotitle[videoposition[videonum]];video.src=videolist[videoposition[videonum]];video.play();$("#video").on("ended",function(){if(videonum+1==vcount){videonum=0}else{videonum++}video.src=videolist[videoposition[videonum]];video.play();var nowvideo=videonum+1;info.innerHTML='<span class="video_subtitle">'+nowvideo+" / "+vcount+"<br/>"+videotitle[videoposition[videonum]]})}});function VideoPause(){var video=document.getElementById("video");var vcont=document.getElementById("video_control");if(video.paused){video.play();vcont.innerHTML="一時停止"}else{video.pause();vcont.innerHTML="再生"}}function pickupvideo(){var pvideo=document.getElementById("pickup_video");pvideo.play();pvideo.mute()}function CookieReset(){var mydate=new Date;mydate.setTime(0);document.cookie="filtering_data=0;";document.cookie="sort_data=0;";document.cookie="filtering_sub_data=0;";document.cookie="pin_data=0;";document.cookie="season_data=0;";location.reload()}function SeasonToggle(cookie){var toggle=getCookie(cookie);if(toggle!=2){toggle=2;document.cookie=cookie+"="+toggle+";"}else{toggle=0;document.cookie=cookie+"="+toggle+";"}location.reload()}function CookieReset2(){document.cookie="history_id=;";document.cookie="user_id=;";location.reload()}function objectlist_toggle(){if(document.getElementById("object_list").style.display=="none"){document.getElementById("object_list").style.display="block"}else{document.getElementById("object_list").style.display="none"}}function recommend_toggle(){if(document.getElementById("recommend_to_you").style.display=="none"){document.getElementById("recommend_to_you").style.display="block";document.getElementById("today_recommend").style.display="none"}else{document.getElementById("recommend_to_you").style.display="none";document.getElementById("today_recommend").style.display="block"}}function menu_toggle(defalut_block,other_block){if(document.getElementById(other_block).style.display=="none"){document.getElementById(other_block).style.display="block";document.getElementById(defalut_block).style.display="none"}else{document.getElementById(other_block).style.display="none";document.getElementById(defalut_block).style.display="block"}}function menu_3toggle(defalut_block,other_block,third_block){var a=document.getElementById(defalut_block);var b=document.getElementById(other_block);var c=document.getElementById(third_block);if(a.style.display=="block"&&b.style.display=="none"&&c.style.display=="none"){a.style.display="none";b.style.display="block";c.style.display="none"}else if(a.style.display=="none"&&b.style.display=="block"&&c.style.display=="none"){a.style.display="none";b.style.display="none";c.style.display="block"}else if(a.style.display=="none"&&b.style.display=="none"&&c.style.display=="block"){a.style.display="block";b.style.display="none";c.style.display="none"}}function CountdownTimer(elm,tl,mes){this.initialize.apply(this,arguments)}CountdownTimer.prototype={initialize:function(elm,tl,mes){this.elem=document.getElementById(elm);this.tl=tl;this.mes=mes},countDown:function(){var timer="";var today=new Date;var day=Math.floor((this.tl-today)/(24*60*60*1e3));var hour=Math.floor((this.tl-today)%(24*60*60*1e3)/(60*60*1e3));var min=Math.floor((this.tl-today)%(24*60*60*1e3)/(60*1e3))%60;var sec=Math.floor((this.tl-today)%(24*60*60*1e3)/1e3)%60%60;var milli=Math.floor((this.tl-today)%(24*60*60*1e3)/10)%100;var me=this;if(this.tl-today>0){if(day)timer+='<span class="day">'+day+" Day</span> ";if(hour)timer+='<span class="hour">'+hour+":</span>";timer+='<span class="min">'+this.addZero(min)+'</span>:<span class="sec">'+this.addZero(sec)+"</span>";this.elem.innerHTML=timer;tid=setTimeout(function(){me.countDown()},10)}else{this.elem.innerHTML=this.mes;return}},addZero:function(num){return("0"+num).slice(-2)}};function CDT(){var tl=new Date("2022/10/10 19:59:59");var timer=new CountdownTimer("CDT",tl,"(終了しました)");timer.countDown()}function CDT2(){var tl=new Date("2022/10/08 20:00:00");var timer=new CountdownTimer("CDT2",tl,"(開幕しました)");timer.countDown()}function CDT3(){var tl=new Date("2020/10/30 00:00:00");var timer=new CountdownTimer("CDT3",tl,"(発売しました)");timer.countDown()}$(function(){$("#pickup_stage").slidein({intval:1500,speed:1e3,vertical:0,horizontal:500,ease:"easeInCubic",pointer:false,auto:true,reverse:false})});$(document).ready(function(){$(".tooltip").tooltipster({theme:"tooltipster-punk",animation:"fade",animationDuration:0,arrow:true,trigger:"click",contentCloning:true,interactive:true})});$(document).ready(function(){$("#sortable_table").tablesorter({sortMultiSortKey:"shiftKey"})});$(function(){var offsetY=-10;var time=500;$("a[href^=#]").click(function(){var target=$(this.hash);if(!target.length)return;var targetY=target.offset().top+offsetY;$("html,body").animate({scrollTop:targetY},time,"swing");window.history.pushState(null,null,this.hash);return false})});jQuery(document).ready(function(){var supportIMEMode="ime-mode"in document.body.style;var noSbcRegex=/[^\x00-\x7E]+/g;jQuery(".sbc_field").on("keydown blur paste",function(e){if(e.type=="keydown"||e.type=="blur")if(supportIMEMode)return;var target=jQuery(this);if(!target.val().match(noSbcRegex))return;window.setTimeout(function(){target.val(target.val().replace(noSbcRegex,""))},1)})});$(function(){$('[type="submit"]').click(function(){$(this).prop("disabled",true);$(this).closest("form").submit()})});function alertWindow(){var mes="";if(lang=="ja"){mes="投稿すると最新の利用規約に同意したものと見なします。特に、ランキングへの不正記録の投稿（エミュレーター、改造ROM等を使ったスコアの偽装）は発覚次第厳重に処分します。不正をしていないとお約束していただける場合のみ「OK」を押して下さい。"}else{mes='By posting, you agree to the latest terms and conditions. In particular, posting fraudulent records to the ranking (impersonation of scores using emulators, modified ROMs, etc.) will be strictly disposed of as soon as they are discovered. Press "OK" only if you can promise that you are not cheating.'}if(window.confirm(mes)){return true}else{return false}}$(function(){$("#pic_files").bind("change",function(){var imgSize1=this.files[0].size;var Mbyte=Math.round(imgSize1/1024/1024*1e3)/1e3;var PrintMes="現在のファイルサイズ："+Mbyte+" MB";$(".filesize1").text(PrintMes);if(imgSize1>3145728){PrintMes="圧縮中...";$(".filesize1").text(PrintMes);const img=new Compressor(this.files[0],{quality:.6,maxWidth:1e3,maxHeight:1e3,mimeType:"image/jpeg",success(result){var reader=new FileReader;reader.readAsDataURL(result);var fixedMbyte=Math.round(result.size/1024/1024*1e3)/1e3;PrintMes=Mbyte+" MBを"+fixedMbyte+"MBに圧縮しました。<br>アップロードします...";$(".filesize1").html(PrintMes);var formData=new FormData;formData.append("upFile",result,"test.jpg");$.ajax({url:"./pik4_picsupload.php",type:"POST",data:formData,cache:false,contentType:false,processData:false,dataType:"html"}).done(function(data,textStatus,xhr){if(data=="UPLOAD NG"){PrintMes="エラー1505：ファイルのアップロードに失敗しました。ページを更新してください...";$(".filesize1").text(PrintMes);$('[type="submit"]').prop("disabled",true);$("#filesize_over").show()}else{PrintMes=Mbyte+" MBを"+fixedMbyte+"MBに圧縮しました。<br>ファイルアップロードが完了しました。";$(".filesize1").html(PrintMes);$("#large_picfile").val(data);$('[type="file"]').prop("disabled",true);$('[type="submit"]').prop("disabled",false);$("#filesize_over").hide()}}).fail(function(data,textStatus,errorThrown){PrintMes="エラー1519：ファイルのアップロードに失敗しました。ページを更新してください...";$(".filesize1").text(PrintMes)})},error(err){PrintMes="圧縮に失敗しました（"+Mbyte+"MB）";$(".filesize1").text(PrintMes);$('[type="submit"]').prop("disabled",true);$("#filesize_over").show()}});$('[type="submit"]').prop("disabled",true);$("#filesize_over").show()}else{$('[type="submit"]').prop("disabled",false);$("#filesize_over").hide()}})});function teamselect(name,rate,min,max){$.ajax({type:"POST",url:"pik4_team.php",data:{user_name:name,rate:rate,min:min,max:max},success:function(data){var elem=document.getElementById("teamoutput");elem.innerHTML=data},error:function(XMLHttpRequest,textStatus,errorThrown){}})}$(function(){$("#mobile_fixed_key3").on("click",".submenutoggle",function(){$("#g-nav").toggleClass("panelactive");$("#wrapper_filter").removeClass("hidden");var checkpost=$("#org_form").attr("class");if(checkpost=="panelactive"){$("#org_form").removeClass("panelactive")}else{$(".pik4_table").toggleClass("mainblur")}});$("#mobile_fixed_key2").on("click",".submenutoggle",function(){$("#org_form").toggleClass("panelactive");$("#wrapper_filter").removeClass("hidden");var checknav=$("#g-nav").attr("class");if(checknav=="pik4_form panelactive"){$("#g-nav").removeClass("panelactive")}else{$(".pik4_table").toggleClass("mainblur")}});$(".blurhidden").click(function(){$("#org_form").removeClass("panelactive");$("#g-nav").removeClass("panelactive");$(".pik4_table").removeClass("mainblur");$(".blurhidden").addClass("hidden")});$("#g-nav a").click(function(){$("#g-nav").removeClass("panelactive");$(".pik4_table").removeClass("mainblur")});$("#org_form a").click(function(){$("#org_form").removeClass("panelactive");$(".pik4_table").removeClass("mainblur")})});$(function(){$("#toplink").click(function(){$("body, html").animate({scrollTop:0},500);return false})});function getarea(){$.ajax({type:"POST",url:"pik4_getarea.php",cache:false,data:{stage_id:1},success:function(data){const mapkey=range(173,207);var team=getCookie("team");var awidth=5;var aheight=7;var teamae="☕";var teambe="🐻";mapkey.forEach(function(key){var tr=Math.floor((key-mapkey[0])/awidth)+1;var td=key-mapkey[0]+1-awidth*(tr-1);var stagetitle=data[key].title.replace("（",'<br><span class="tar">（')+"</span>";var mark=data[key].mark.substring(4,5);if(mark==1){var excav_time=15;var multi=2}else if(mark==2){var excav_time=30;var multi=8}else if(mark==3){var excav_time=60;var multi=24}else if(mark==4){var excav_time=120;var multi=64}else{var excav_time=999999;var multi=0}if(data[key].flag==3&&team==17||data[key].flag==4&&team==18){var myteam=1}else{var myteam=0}var updatetime=data[key].update_time;var checktime=data[key].check_time;if(myteam){var counttime=orgcountdown(checktime,excav_time)}else{var counttime=orgcountdown(updatetime,excav_time)}var getore=checktime!==0?Math.floor(checktime/(1e3*60)/excav_time)*multi:0;var bonus=updatetime!==0?Math.floor(updatetime/(1e3*60)/excav_time)*multi:0;if(data[key].flag>2){var teamnum="team"+(Number(data[key].flag)+14)}else{var teamnum=""}if(data["arrow"].teama[data[key].stage_id]===null){var arra=""}else if(data["arrow"].teama[data[key].stage_id]<6){var arra='<i class="fas fa-chevron-right"></i>'.repeat(data["arrow"].teama[data[key].stage_id])}else{var arra=data["arrow"].teama[data[key].stage_id]+'<i class="fas fa-chevron-right"></i>'.repeat(5)}if(data["arrow"].teamb[data[key].stage_id]===null){var arrb=""}else if(data["arrow"].teamb[data[key].stage_id]<6){var arrb='<i class="fas fa-chevron-left"></i>'.repeat(data["arrow"].teamb[data[key].stage_id])}else{var arrb='<i class="fas fa-chevron-left"></i>'.repeat(5)+data["arrow"].teamb[data[key].stage_id]}$("#area"+key).removeClass("area_1 area_2 area_3 area_4 team17 team18").addClass("area_"+data[key].flag+" "+teamnum);var nextcheck=[];if((key-(mapkey[0]-1))%awidth!==0)nextcheck.push(key+1);if((key-(mapkey[0]-1))%awidth!==1)nextcheck.push(key-1);if(key>mapkey[0]-1+awidth)nextcheck.push(key-awidth);if(key<=mapkey[0]-1+awidth*(aheight-1))nextcheck.push(key+awidth);if(myteam){var link=data[key].stage_id}else{var link=data[key].stage_id}nextcheck.forEach(function(next){if(team==17&&data[next].flag==3)link=data[key].stage_id;if(team==18&&data[next].flag==4)link=data[key].stage_id});if(data[key].mark=="base"){if(data[key].flag==3)var teamname="チームカフェオレ"+teamae;if(data[key].flag==4)var teamname="チームクマキボリ"+teambe;$("#area"+key).html('<A href="#">◆拠点◆<br>'+teamname+"</A>")}else if(myteam&&(data[key].flag==3||data[key].flag==4)){$("#area"+key).html('<A href="./'+link+'">'+tr+"-"+td+"◆"+stagetitle+data[key].user_name+'<p><i class="fa fa-star" aria-hidden="true"></i>'+data[key].top_score+' pts.  <i class="fas fa-paper-plane"></i>'+data[key].count+'</p><p style="text-align:center;"><span class="arrow" id="arra'+data[key].stage_id+'">'+arra+"</span>"+teamae+data[key].team_a+" - "+data[key].team_b+teambe+'<span class="arrow" id="arrb'+data[key].stage_id+'">'+arrb+'</span><br><i class="roundbg"><i class="fa faa-wrench animated-hover">⛏</i>'+counttime+' <span class="gem"><i class="fas fa-gem"></i></span>'+getore+'</i> <i class="fas fa-coins"></i>'+bonus+"</p></A>")}else if(!myteam&&(data[key].flag==3||data[key].flag==4)){if(link){$("#area"+key).html('<A href="./'+link+'">'+tr+"-"+td+"◆"+stagetitle+data[key].user_name+'<p><i class="fa fa-star" aria-hidden="true"></i>'+data[key].top_score+' pts.  <i class="fas fa-paper-plane"></i>'+data[key].count+'</p><p style="text-align:center;"><span class="arrow" id="arra'+data[key].stage_id+'">'+arra+"</span>"+teamae+data[key].team_a+" - "+data[key].team_b+teambe+'<span class="arrow" id="arrb'+data[key].stage_id+'">'+arrb+'</span><br><span class="gem"><i class="fas fa-gem"></i></span>'+getore+' <i class="roundbg"><i class="fa faa-wrench animated-hover">⛏</i>'+counttime+' <i class="fas fa-coins"></i>'+bonus+"</i></p></A>")}else{$("#area"+key).html('<A href="./'+link+'">'+tr+"-"+td+"◆"+stagetitle+data[key].user_name+'<p><i class="fa fa-star" aria-hidden="true"></i>'+data[key].top_score+' pts.  <i class="fas fa-paper-plane"></i>'+data[key].count+'</p><p style="text-align:center;"><span class="arrow" id="arra'+data[key].stage_id+'">'+arra+"</span>"+teamae+data[key].team_a+" - "+data[key].team_b+teambe+'<span class="arrow" id="arrb'+data[key].stage_id+'">'+arrb+'</span><br><span class="gem"><i class="fas fa-gem"></i></span>'+getore+' <i class="roundbg"><i class="fa faa-wrench animated-hover">⛏</i>'+counttime+' <i class="fas fa-coins"></i>'+bonus+"</i></p></A>")}}else if(data[key].flag==2){$("#area"+key).html('<A href="./'+link+'">'+tr+"-"+td+"◆"+stagetitle+'<br><span class="gem">'+mark+'<i class="fas fa-gem"></i></span></A>')}else if(data[key].flag==1){$("#area"+key).html(tr+"-"+td)}})},error:function(XMLHttpRequest,textStatus,errorThrown){}})}function collectarea(id){$.ajax({type:"POST",url:"pik4_writearea.php?id="+Math.random(),cache:false,data:{stage_id:id},success:function(flag){}})}function getpoint(lim,teama,teamb){$.ajax({type:"POST",url:"pik4_getpoint.php",cache:false,data:{lim:lim,teama:teama,teamb:teamb},success:function(data){$("#teama_areapoint"+lim).text(data.team.teama["area"]);$("#teamb_areapoint"+lim).text(data.team.teamb["area"]);$("#teama_rankpoint"+lim).text(data.team.teama["rps"]);$("#teamb_rankpoint"+lim).text(data.team.teamb["rps"]);$("#teama_gamepoint"+lim).text(data.team.teama["game_point"]);$("#teamb_gamepoint"+lim).text(data.team.teamb["game_point"]);$("#teama_user_tab"+lim).empty();$("#teamb_user_tab"+lim).empty();for(const useradata in data.user.teama){$("#teama_user_tab"+lim).append("<tr><td><b>"+data.user.teama[useradata].user_name+"</b></td><td>"+data.user.teama[useradata].total_rpslim018+" RPS</td><td>"+data.user.teama[useradata].total_limited018+" pts.</td></tr>")}for(const userbdata in data.user.teamb){$("#teamb_user_tab"+lim).append("<tr><td><b>"+data.user.teamb[userbdata].user_name+"</b></td><td>"+data.user.teamb[userbdata].total_rpslim018+" RPS</td><td>"+data.user.teamb[userbdata].total_limited018+" pts.</td></tr>")}},error:function(XMLHttpRequest,textStatus,errorThrown){}})}const range=(start,stop)=>Array.from({length:stop-start+1},(_,i)=>start+i);function orgcountdown(time,excav){if(time==0){var min=excav-Math.floor(time%(24*60*60*1e3)/(60*1e3))%excav-1;var sec=60-Math.floor(time%(24*60*60*1e3)/1e3)%60%60;if(sec==60){sec=0;if(min<excav-1){min++}else{min=0}}return min+":"+zeroPadding(sec,2)}else{return"0:0"}}function getarea18(){$.ajax({type:"POST",url:"pik4_getarea.php",cache:false,data:{stage_id:1},success:function(data){const mapkey=range(208,222);var team=getCookie("team");var awidth=5;var aheight=3;var teamae="🚀";var teambe="🐤";mapkey.forEach(function(key){var tr=Math.floor((key-mapkey[0])/awidth)+1;var td=key-mapkey[0]+1-awidth*(tr-1);if(data[key].title){var stagetitle=data[key].title.replace("（",'<br><span class="tar">（')+"</span>"}else{var stagetitle=""}if(data[key].mark){var mark=data[key].mark.substring(4,5)}else{var mark=""}if(data[key].flag==3&&team==19||data[key].flag==4&&team==20){var myteam=1}else{var myteam=0}if(data[key].flag>2){var teamnum="team"+(Number(data[key].flag)+16)}else{var teamnum=""}if(data["arrow"]){if(data["arrow"].teama[data[key].stage_id]===null){var arra=""}else if(data["arrow"].teama[data[key].stage_id]<6){var arra='<i class="fas fa-chevron-right"></i>'.repeat(data["arrow"].teama[data[key].stage_id])}else{var arra=data["arrow"].teama[data[key].stage_id]+'<i class="fas fa-chevron-right"></i>'.repeat(5)}if(data["arrow"].teamb[data[key].stage_id]===null){var arrb=""}else if(data["arrow"].teamb[data[key].stage_id]<6){var arrb='<i class="fas fa-chevron-left"></i>'.repeat(data["arrow"].teamb[data[key].stage_id])}else{var arrb='<i class="fas fa-chevron-left"></i>'.repeat(5)+data["arrow"].teamb[data[key].stage_id]}}else{var arra="";var arrb=""}$("#area"+key).removeClass("area_1 area_2 area_3 area_4 team19 team20").addClass("area_"+data[key].flag+" "+teamnum);var nextcheck=[];if((key-(mapkey[0]-1))%awidth!==0)nextcheck.push(key+1);if((key-(mapkey[0]-1))%awidth!==1)nextcheck.push(key-1);if(key>mapkey[0]-1+awidth)nextcheck.push(key-awidth);if(key<=mapkey[0]-1+awidth*(aheight-1))nextcheck.push(key+awidth);if(myteam){var link=data[key].stage_id}else{var link=0}nextcheck.forEach(function(next){if(team==19&&data[next].flag==3)link=data[key].stage_id;if(team==20&&data[next].flag==4)link=data[key].stage_id});if(link===0&&myteam===0){stagetitle='？？？<br><span class="tar">（？？？）</span>';link="221008#"}if(data[key].mark=="base"){if(data[key].flag==3)var teamname="チームオリマー"+teamae;if(data[key].flag==4)var teamname="チームチャーリー"+teambe;$("#area"+key).html('<A href="./221008">◆拠点◆<br>'+teamname+"</A>")}else if(myteam&&(data[key].flag==3||data[key].flag==4)){$("#area"+key).html('<A href="./'+link+'">'+tr+"-"+td+"◆"+stagetitle+data[key].user_name+'<p><i class="fa fa-star" aria-hidden="true"></i>'+data[key].top_score+' pts.  <i class="fas fa-paper-plane"></i>'+data[key].count+'</p><p style="text-align:center;"><span class="arrow" id="arra'+data[key].stage_id+'">'+arra+"</span>"+teamae+data[key].team_a+" - "+data[key].team_b+teambe+'<span class="arrow" id="arrb'+data[key].stage_id+'">'+arrb+"</span></p></A>")}else if(!myteam&&(data[key].flag==3||data[key].flag==4)){if(link){$("#area"+key).html('<A href="./'+link+'">'+tr+"-"+td+"◆"+stagetitle+data[key].user_name+'<p><i class="fa fa-star" aria-hidden="true"></i>'+data[key].top_score+' pts.  <i class="fas fa-paper-plane"></i>'+data[key].count+'</p><p style="text-align:center;"><span class="arrow" id="arra'+data[key].stage_id+'">'+arra+"</span>"+teamae+data[key].team_a+" - "+data[key].team_b+teambe+'<span class="arrow" id="arrb'+data[key].stage_id+'">'+arrb+"</span></p></A>")}else{$("#area"+key).html('<A href="./'+link+'">'+tr+"-"+td+"◆"+stagetitle+data[key].user_name+'<p><i class="fa fa-star" aria-hidden="true"></i>'+data[key].top_score+' pts.  <i class="fas fa-paper-plane"></i>'+data[key].count+'</p><p style="text-align:center;"><span class="arrow" id="arra'+data[key].stage_id+'">'+arra+"</span>"+teamae+data[key].team_a+" - "+data[key].team_b+teambe+'<span class="arrow" id="arrb'+data[key].stage_id+'">'+arrb+"</span></p></A>")}}else if(data[key].flag==2){$("#area"+key).html('<A href="./'+link+'">'+tr+"-"+td+"◆"+stagetitle+"</A>")}else if(data[key].flag==1){$("#area"+key).html(tr+"-"+td)}})},error:function(XMLHttpRequest,textStatus,errorThrown){}})}